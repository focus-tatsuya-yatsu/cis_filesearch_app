# ========================================
# CIS File Search - Production Environment Configuration
# ========================================
#
# ⚠️ SECURITY WARNING:
# - This file contains production settings templates
# - Replace placeholder values with actual production values
# - Never commit sensitive credentials to version control
# - Use AWS Systems Manager Parameter Store or Secrets Manager in production
#
# ========================================
# OpenSearch Configuration
# ========================================

# OpenSearch Endpoint (AWS OpenSearch Service - VPC Endpoint)
# 本番環境: VPCエンドポイント（EC2内からのみアクセス可能）
OPENSEARCH_ENDPOINT=https://vpc-cis-filesearch-opensearch-xuupcgptq6a4opklfeh5x3uqe.ap-northeast-1.es.amazonaws.com

# OpenSearch Index Name
OPENSEARCH_INDEX=file-index

# ========================================
# AWS Configuration
# ========================================

# AWS Region
AWS_REGION=ap-northeast-1

# AWS Credentials
# ⚠️ 本番環境では EC2 IAMロールを使用するため、ここでは設定不要
# ローカル/開発環境でのみ設定が必要
# AWS_ACCESS_KEY_ID=AKIAIOSFODNN7EXAMPLE
# AWS_SECRET_ACCESS_KEY=wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY

# ========================================
# S3 Configuration
# ========================================

# S3 Bucket Name
S3_BUCKET=cis-filesearch-storage
S3_BUCKET_NAME=cis-filesearch-storage

# S3 Prefixes
S3_PROCESSED_PREFIX=processed/
S3_THUMBNAIL_PREFIX=thumbnails/

# S3 Presigned URL有効期限（秒）
# 本番環境: 5分（セキュリティ優先）
S3_PRESIGNED_URL_EXPIRES=300

# ========================================
# AWS Cognito Authentication
# ========================================

# Cognito User Pool ID
NEXT_PUBLIC_COGNITO_USER_POOL_ID=ap-northeast-1_Zuf31l4an

# Cognito App Client ID
NEXT_PUBLIC_COGNITO_APP_CLIENT_ID=2s3km9tqr8bffn6bqc0ih0cma1

# Cognito Hosted UI Domain
NEXT_PUBLIC_COGNITO_DOMAIN=ap-northeast-1zuf31l4an.auth.ap-northeast-1.amazoncognito.com

# Application URL (Production)
# 本番環境: 実際のドメイン名に置き換える
NEXT_PUBLIC_APP_URL=https://cis-filesearch.com

# ========================================
# API Gateway Configuration
# ========================================

# API Gateway URL (Lambda Search API)
NEXT_PUBLIC_API_GATEWAY_URL=https://5xbn3ng31f.execute-api.ap-northeast-1.amazonaws.com/default/search

# Sync Trigger API URL (NAS同期トリガー用)
NEXT_PUBLIC_SYNC_API_URL=https://glwla2jrsf.execute-api.ap-northeast-1.amazonaws.com

# モックフォールバック（本番環境では無効化）
NEXT_PUBLIC_USE_MOCK_FALLBACK=false

# ========================================
# AWS Bedrock Configuration
# ========================================

# Bedrock Model ID for Image Embeddings
# Titan Multimodal Embeddings は us-east-1 でのみ利用可能
BEDROCK_MODEL_ID=amazon.titan-embed-image-v1

# Bedrockリージョン（Titan Multimodal専用）
BEDROCK_REGION=us-east-1

# モックモード無効化（本番環境では実際のBedrockを使用）
USE_MOCK_EMBEDDING=false

# ========================================
# Performance Optimization
# ========================================

# 画像エンベディングキャッシュ設定
EMBEDDING_CACHE_TTL=86400          # 24時間（秒）
EMBEDDING_CACHE_MAX_SIZE=10000      # 最大10,000エントリ

# OpenSearch クエリ最適化
OPENSEARCH_REQUEST_TIMEOUT=30000    # 30秒
OPENSEARCH_MAX_RETRIES=3            # 最大3回リトライ
OPENSEARCH_BATCH_SIZE=100           # バッチ更新サイズ

# 並列処理設定
MAX_CONCURRENT_EMBEDDINGS=5         # 同時処理数
BATCH_PROCESSING_DELAY=1000         # バッチ間隔（ミリ秒）

# ========================================
# Monitoring & Logging
# ========================================

# CloudWatch Logs設定
ENABLE_CLOUDWATCH_LOGS=true
LOG_LEVEL=info                      # info, warn, error
LOG_GROUP_NAME=/aws/lambda/cis-filesearch

# パフォーマンスメトリクス
ENABLE_PERFORMANCE_METRICS=true
METRICS_NAMESPACE=CISFileSearch

# エラートラッキング
ENABLE_ERROR_TRACKING=true

# ========================================
# Security Settings
# ========================================

# CSP (Content Security Policy)
NEXT_PUBLIC_CSP_ENABLED=true

# API Rate Limiting
API_RATE_LIMIT_PER_MINUTE=100
API_RATE_LIMIT_PER_HOUR=1000

# ========================================
# Node Environment
# ========================================

NODE_ENV=production

# Next.js Production Settings
NEXT_TELEMETRY_DISABLED=1

# ========================================
# Deployment Information
# ========================================
# 以下は自動的に設定される情報（CI/CDで上書き）
# BUILD_ID=
# DEPLOY_DATE=
# GIT_COMMIT=
