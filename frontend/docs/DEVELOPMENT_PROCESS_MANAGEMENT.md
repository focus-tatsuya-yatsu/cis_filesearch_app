# é–‹ç™ºãƒ—ãƒ­ã‚»ã‚¹ç®¡ç†ã‚¬ã‚¤ãƒ‰

## ğŸ“‹ æ¦‚è¦

Next.jsé–‹ç™ºç’°å¢ƒã«ãŠã‘ã‚‹é‡è¤‡ãƒ—ãƒ­ã‚»ã‚¹ã€ãƒãƒ¼ãƒˆç«¶åˆã€ãƒ­ãƒƒã‚¯ãƒ•ã‚¡ã‚¤ãƒ«å•é¡Œã‚’é˜²ããŸã‚ã®ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹ã‚¬ã‚¤ãƒ‰ã€‚

## ğŸš¨ ã‚ˆãã‚ã‚‹å•é¡Œã¨è§£æ±ºç­–

### 1. **ãƒãƒ¼ãƒˆ3000ãŒæ—¢ã«ä½¿ç”¨ä¸­**

**ç—‡çŠ¶:**
```
- ready started server on 0.0.0.0:3000
Error: listen EADDRINUSE: address already in use :::3000
```

**åŸå› :**
- è¤‡æ•°ã®`yarn dev`/`npm run dev`ãƒ—ãƒ­ã‚»ã‚¹ãŒåŒæ™‚å®Ÿè¡Œ
- ä»¥å‰ã®ãƒ—ãƒ­ã‚»ã‚¹ãŒæ­£å¸¸çµ‚äº†ã—ã¦ã„ãªã„
- ä»–ã®ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãŒãƒãƒ¼ãƒˆ3000ã‚’ä½¿ç”¨

**è§£æ±ºç­–:**
```bash
# ç¾åœ¨ã®çŠ¶æ…‹ã‚’ç¢ºèª
yarn dev:status

# ã™ã¹ã¦ã®ãƒ—ãƒ­ã‚»ã‚¹ã‚’åœæ­¢
yarn dev:stop

# ã‚¯ãƒªãƒ¼ãƒ³ãªçŠ¶æ…‹ã§å†èµ·å‹•
yarn dev:clean
```

### 2. **Next.jsãƒ­ãƒƒã‚¯ãƒ•ã‚¡ã‚¤ãƒ«ç«¶åˆ**

**ç—‡çŠ¶:**
```
Error: Failed to acquire lock
Lock file: /path/to/frontend/.next/dev/lock
```

**åŸå› :**
- å‰å›ã®ãƒ—ãƒ­ã‚»ã‚¹ãŒç•°å¸¸çµ‚äº†ã—ã€ãƒ­ãƒƒã‚¯ãƒ•ã‚¡ã‚¤ãƒ«ãŒæ®‹å­˜
- è¤‡æ•°ã®ãƒ—ãƒ­ã‚»ã‚¹ãŒåŒæ™‚ã«ãƒ“ãƒ«ãƒ‰ã‚’è©¦è¡Œ

**è§£æ±ºç­–:**
```bash
# è‡ªå‹•ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—ï¼ˆæ¨å¥¨ï¼‰
yarn dev:clean

# æ‰‹å‹•å‰Šé™¤ï¼ˆå¿…è¦ãªå ´åˆã®ã¿ï¼‰
rm -f .next/dev/lock
```

### 3. **éæ¨å¥¨ã®Next.jsè¨­å®šè­¦å‘Š**

**ç—‡çŠ¶:**
```
Warning: The `eslint` option is no longer supported in Next.js 16
Warning: `images.domains` is deprecated, use `images.remotePatterns`
```

**åŸå› :**
- Next.js 16ã§ã®è¨­å®šå¤‰æ›´ã«æœªå¯¾å¿œ

**è§£æ±ºæ¸ˆã¿:**
âœ… `next.config.js`ã‚’æœ€æ–°ä»•æ§˜ã«æ›´æ–°æ¸ˆã¿
- `images.domains` â†’ `images.remotePatterns`
- `eslint` â†’ `typescript.ignoreBuildErrors`

## ğŸ› ï¸ é–‹ç™ºãƒ—ãƒ­ã‚»ã‚¹ç®¡ç†ãƒ„ãƒ¼ãƒ«

### ãƒ—ãƒ­ã‚»ã‚¹ç®¡ç†ã‚¹ã‚¯ãƒªãƒ—ãƒˆ

```bash
# ä½¿ç”¨å¯èƒ½ãªã‚³ãƒãƒ³ãƒ‰
yarn dev              # é€šå¸¸ã®èµ·å‹•
yarn dev:clean        # ã‚¯ãƒªãƒ¼ãƒ³ãªçŠ¶æ…‹ã§å†èµ·å‹•
yarn dev:stop         # ã™ã¹ã¦ã®ãƒ—ãƒ­ã‚»ã‚¹ã‚’åœæ­¢
yarn dev:status       # ç¾åœ¨ã®ãƒ—ãƒ­ã‚»ã‚¹çŠ¶æ…‹ã‚’ç¢ºèª

# ä½ãƒ¬ãƒ™ãƒ«ã‚¹ã‚¯ãƒªãƒ—ãƒˆï¼ˆç›´æ¥å®Ÿè¡Œï¼‰
./scripts/dev-manager.sh start     # é–‹ç™ºã‚µãƒ¼ãƒãƒ¼èµ·å‹•
./scripts/dev-manager.sh stop      # ã™ã¹ã¦ã®ãƒ—ãƒ­ã‚»ã‚¹åœæ­¢
./scripts/dev-manager.sh restart   # å†èµ·å‹•
./scripts/dev-manager.sh status    # çŠ¶æ…‹ç¢ºèª
./scripts/dev-manager.sh clean     # .nextãƒ•ã‚©ãƒ«ãƒ€ã‚’å‰Šé™¤
```

### ã‚¹ã‚¯ãƒªãƒ—ãƒˆã®æ©Ÿèƒ½

1. **è‡ªå‹•ãƒ—ãƒ­ã‚»ã‚¹æ¤œå‡ºã¨åœæ­¢**
   - é‡è¤‡ãƒ—ãƒ­ã‚»ã‚¹ã‚’è‡ªå‹•æ¤œå‡º
   - å®‰å…¨ãªåœæ­¢ï¼ˆSIGTERM â†’ SIGKILLï¼‰

2. **ãƒ­ãƒƒã‚¯ãƒ•ã‚¡ã‚¤ãƒ«ç®¡ç†**
   - è‡ªå‹•å‰Šé™¤ã¨æ¤œè¨¼
   - çŠ¶æ…‹ãƒ¬ãƒãƒ¼ãƒˆ

3. **ãƒãƒ¼ãƒˆç®¡ç†**
   - ãƒãƒ¼ãƒˆ3000-3002ã®ä½¿ç”¨çŠ¶æ³ç¢ºèª
   - ç«¶åˆæ¤œå‡ºã¨ãƒ¬ãƒãƒ¼ãƒˆ

4. **ãƒ­ã‚°ç®¡ç†**
   - ãƒ­ã‚°ãƒ•ã‚¡ã‚¤ãƒ«: `.next/dev/dev-server.log`
   - PIDãƒ•ã‚¡ã‚¤ãƒ«: `.next/dev/dev-server.pid`

## ğŸ“ ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹

### æ—¥å¸¸çš„ãªé–‹ç™ºãƒ•ãƒ­ãƒ¼

#### âœ… æ¨å¥¨ã•ã‚Œã‚‹èµ·å‹•æ‰‹é †

```bash
# 1. ç¾åœ¨ã®çŠ¶æ…‹ã‚’ç¢ºèª
yarn dev:status

# 2. ã‚¯ãƒªãƒ¼ãƒ³ãªç’°å¢ƒã§èµ·å‹•
yarn dev:clean

# 3. é–‹ç™ºä½œæ¥­
# ... ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚° ...

# 4. ä½œæ¥­çµ‚äº†æ™‚ã¯å¿…ãšåœæ­¢
yarn dev:stop
```

#### âŒ é¿ã‘ã‚‹ã¹ããƒ‘ã‚¿ãƒ¼ãƒ³

```bash
# è¤‡æ•°ã®ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã§åŒæ™‚èµ·å‹•ï¼ˆNGï¼‰
# ã‚¿ãƒ¼ãƒŸãƒŠãƒ«1: yarn dev
# ã‚¿ãƒ¼ãƒŸãƒŠãƒ«2: yarn dev  # â† ç«¶åˆç™ºç”Ÿ

# Ctrl+Cã§åœæ­¢ã›ãšã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã‚’é–‰ã˜ã‚‹ï¼ˆNGï¼‰
# â†’ ãƒ—ãƒ­ã‚»ã‚¹ãŒãƒãƒƒã‚¯ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰ã§æ®‹ã‚‹

# ãƒ­ãƒƒã‚¯ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ‰‹å‹•å‰Šé™¤ã—ã™ãã‚‹ï¼ˆNGï¼‰
# â†’ æ ¹æœ¬åŸå› ã‚’è§£æ±ºã—ã¦ã„ãªã„
```

### ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ãƒ•ãƒ­ãƒ¼

```mermaid
graph TD
    A[èµ·å‹•ã‚¨ãƒ©ãƒ¼ç™ºç”Ÿ] --> B{ãƒãƒ¼ãƒˆç«¶åˆ?}
    B -->|Yes| C[yarn dev:status]
    B -->|No| D{ãƒ­ãƒƒã‚¯ãƒ•ã‚¡ã‚¤ãƒ«?}
    C --> E[yarn dev:stop]
    D -->|Yes| F[yarn dev:clean]
    D -->|No| G[ãã®ä»–ã®ã‚¨ãƒ©ãƒ¼]
    E --> H[yarn dev]
    F --> H
    G --> I[ãƒ­ã‚°ç¢ºèª: .next/dev/dev-server.log]
```

### ãƒ—ãƒ­ã‚»ã‚¹ç®¡ç†ã®ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ

é–‹ç™ºé–‹å§‹æ™‚:
- [ ] æ—¢å­˜ãƒ—ãƒ­ã‚»ã‚¹ãŒæ®‹ã£ã¦ã„ãªã„ã‹ç¢ºèªï¼ˆ`yarn dev:status`ï¼‰
- [ ] ãƒãƒ¼ãƒˆ3000ãŒç©ºã„ã¦ã„ã‚‹ã‹ç¢ºèª
- [ ] ãƒ­ãƒƒã‚¯ãƒ•ã‚¡ã‚¤ãƒ«ãŒå­˜åœ¨ã—ãªã„ã‹ç¢ºèª

é–‹ç™ºä¸­:
- [ ] 1ã¤ã®ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã§ã®ã¿`yarn dev`ã‚’å®Ÿè¡Œ
- [ ] ã‚¨ãƒ©ãƒ¼ç™ºç”Ÿæ™‚ã¯å³åº§ã«`yarn dev:status`ã§ç¢ºèª
- [ ] å†èµ·å‹•ãŒå¿…è¦ãªå ´åˆã¯`yarn dev:clean`ã‚’ä½¿ç”¨

é–‹ç™ºçµ‚äº†æ™‚:
- [ ] Ctrl+Cã§æ­£å¸¸ã«åœæ­¢
- [ ] `yarn dev:stop`ã§æ®‹å­˜ãƒ—ãƒ­ã‚»ã‚¹ã‚’ç¢ºèª
- [ ] å¿…è¦ã«å¿œã˜ã¦`yarn dev:status`ã§æœ€çµ‚ç¢ºèª

## ğŸ” é«˜åº¦ãªãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### ãƒ—ãƒ­ã‚»ã‚¹ã‚’æ‰‹å‹•ã§èª¿æŸ»

```bash
# Next.jsãƒ—ãƒ­ã‚»ã‚¹ã‚’ã™ã¹ã¦ç¢ºèª
ps aux | grep "next dev"

# ãƒãƒ¼ãƒˆä½¿ç”¨çŠ¶æ³ã‚’è©³ç´°ç¢ºèª
lsof -ti:3000
lsof -i:3000 -P -n

# ãƒ—ãƒ­ã‚»ã‚¹ã‚’æ‰‹å‹•ã§åœæ­¢
kill -15 <PID>  # é€šå¸¸ã®åœæ­¢
kill -9 <PID>   # å¼·åˆ¶åœæ­¢ï¼ˆæœ€å¾Œã®æ‰‹æ®µï¼‰
```

### ãƒ­ãƒƒã‚¯ãƒ•ã‚¡ã‚¤ãƒ«ã®è©³ç´°ç¢ºèª

```bash
# ãƒ­ãƒƒã‚¯ãƒ•ã‚¡ã‚¤ãƒ«ã®å­˜åœ¨ç¢ºèª
ls -la .next/dev/lock

# ãƒ­ãƒƒã‚¯ãƒ•ã‚¡ã‚¤ãƒ«ã®è©³ç´°
stat .next/dev/lock

# æ‰‹å‹•å‰Šé™¤ï¼ˆç·Šæ€¥æ™‚ã®ã¿ï¼‰
rm -f .next/dev/lock
```

### ã‚·ã‚¹ãƒ†ãƒ ãƒªã‚½ãƒ¼ã‚¹ç¢ºèª

```bash
# ãƒ¡ãƒ¢ãƒªä½¿ç”¨é‡
ps aux | grep node | awk '{print $2, $4, $11}'

# CPUä½¿ç”¨é‡
top -l 1 | grep "next dev"

# ãƒ‡ã‚£ã‚¹ã‚¯ä½¿ç”¨é‡
du -sh .next
```

## ğŸš€ ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–

### é–‹ç™ºã‚µãƒ¼ãƒãƒ¼ã®èµ·å‹•é€Ÿåº¦æ”¹å–„

1. **ä¸è¦ãªãƒ•ã‚¡ã‚¤ãƒ«ã‚’é™¤å¤–**
   ```json
   // next.config.js
   {
     "turbopack": {
       // Turbopackã§é«˜é€ŸåŒ–
     }
   }
   ```

2. **ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã®ã‚¯ãƒªã‚¢**
   ```bash
   # å®Œå…¨ãªã‚¯ãƒªãƒ¼ãƒ³ãƒ“ãƒ«ãƒ‰
   ./scripts/dev-manager.sh clean
   yarn dev
   ```

3. **ç’°å¢ƒå¤‰æ•°ã®æœ€é©åŒ–**
   ```bash
   # .env.local
   NODE_OPTIONS=--max-old-space-size=4096
   ```

## ğŸ“š é–¢é€£ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

- [Next.js 16 Migration Guide](https://nextjs.org/docs/app/building-your-application/upgrading/version-16)
- [Next.js Configuration Options](https://nextjs.org/docs/app/api-reference/next-config-js)
- [Turbopack Documentation](https://turbo.build/pack)

## ğŸ¤ ãƒãƒ¼ãƒ é–‹ç™ºã§ã®æ³¨æ„äº‹é …

### Gitç®¡ç†

```gitignore
# .gitignore ã«è¿½åŠ ï¼ˆæ—¢ã«è¨­å®šæ¸ˆã¿ï¼‰
.next/
.next/dev/lock
.next/dev/*.pid
.next/dev/*.log
```

### CI/CDç’°å¢ƒ

```yaml
# GitHub Actionsä¾‹
- name: Clean Next.js cache
  run: |
    rm -rf .next
    yarn dev:clean

- name: Start dev server for testing
  run: |
    yarn dev &
    sleep 10  # ã‚µãƒ¼ãƒãƒ¼èµ·å‹•å¾…æ©Ÿ
```

### ãƒãƒ¼ãƒ å…±æœ‰ãƒ«ãƒ¼ãƒ«

1. **å•é¡Œç™ºç”Ÿæ™‚ã¯å³åº§ã«å ±å‘Š**
   - ãƒ—ãƒ­ã‚»ã‚¹ç«¶åˆã‚’æ¤œçŸ¥ã—ãŸã‚‰`yarn dev:status`ã®çµæœã‚’å…±æœ‰

2. **å®šæœŸçš„ãªã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—**
   - é€±æ¬¡ã¾ãŸã¯é‡å¤§ãªå¤‰æ›´å¾Œã«`yarn dev:clean`ã‚’å®Ÿè¡Œ

3. **ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã®æ›´æ–°**
   - æ–°ã—ã„å•é¡Œã‚„è§£æ±ºç­–ã‚’ç™ºè¦‹ã—ãŸã‚‰ã“ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’æ›´æ–°

## ğŸ” ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è€ƒæ…®äº‹é …

### ãƒ­ã‚°ãƒ•ã‚¡ã‚¤ãƒ«ã®å–ã‚Šæ‰±ã„

```bash
# æ©Ÿå¯†æƒ…å ±ãŒå«ã¾ã‚Œã‚‹å¯èƒ½æ€§ã®ã‚ã‚‹ãƒ­ã‚°ã‚’ç¢ºèª
cat .next/dev/dev-server.log | grep -i "password\|token\|secret"

# å®šæœŸçš„ã«ãƒ­ã‚°ã‚’ãƒ­ãƒ¼ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³
mv .next/dev/dev-server.log .next/dev/dev-server.log.old
```

### ç’°å¢ƒå¤‰æ•°ã®ä¿è­·

```bash
# .env.localã¯çµ¶å¯¾ã«ã‚³ãƒŸãƒƒãƒˆã—ãªã„
# èª¤ã£ã¦ã‚³ãƒŸãƒƒãƒˆã—ãŸå ´åˆã¯å³åº§ã«ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆã‚’ãƒ­ãƒ¼ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³
```

## ğŸ“Š ãƒ¢ãƒ‹ã‚¿ãƒªãƒ³ã‚°

### é–‹ç™ºã‚µãƒ¼ãƒãƒ¼ã®å¥å…¨æ€§ãƒã‚§ãƒƒã‚¯

```bash
# å®šæœŸçš„ãªå¥å…¨æ€§ç¢ºèªã‚¹ã‚¯ãƒªãƒ—ãƒˆ
watch -n 5 "yarn dev:status"

# ãƒ—ãƒ­ã‚»ã‚¹æ•°ã®ç›£è¦–
watch -n 5 "ps aux | grep -c '[n]ext dev'"
```

---

**æœ€çµ‚æ›´æ–°**: 2025-12-18
**Next.js ãƒãƒ¼ã‚¸ãƒ§ãƒ³**: 16.0.10
**Node.js ãƒãƒ¼ã‚¸ãƒ§ãƒ³**: 22.20.0
