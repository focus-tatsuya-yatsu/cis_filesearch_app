# CIS ファイル検索システム要件定義書

## 1. プロジェクト概要

### 1.1 背景と目的
クライアント企業では、複数のNASに保存された大量のファイルから必要な情報を効率的に検索することが困難な状況にあります。本システムは、AWS基盤を活用した高性能なファイル検索システムを構築し、全社員の業務効率向上を実現します。

### 1.2 システム名称
**CIS File Search Application** (CIS ファイル検索システム)

### 1.3 ステークホルダー
- **エンドユーザー**: 全部署の社員（約50名）
- **システム管理者**: IT部門
- **経営層**: 意思決定者

## 2. 機能要件

### 2.1 検索機能

#### 2.1.1 基本検索機能
- **ファイル名検索**: 部分一致、完全一致、ワイルドカード対応
- **全文検索**: ファイル内容からキーワードを検索
- **メタデータ検索**: 作成日、更新日、作成者、ファイルサイズなど
- **複合検索**: AND/OR条件での絞り込み検索

#### 2.1.2 対応ファイル形式
- **ドキュメント**: PDF、Microsoft Office（Word、Excel、PowerPoint）
- **画像**: JPEG、PNG、GIF、BMP、TIFF
- **CAD/設計**: Docuworks、SFCファイル
- **その他**: テキストファイル、CSVファイル

#### 2.1.3 高度な検索機能
- **画像類似検索**: アップロードした画像と類似した画像ファイルの検索
- **SFCファイル本文検索**: SFCファイル内のテキスト情報を抽出して検索
- **大文字小文字を区別しない検索**: Case-insensitive search
- **検索履歴**: ユーザーごとの検索履歴保存と再利用

### 2.2 フィルタ・ソート機能

#### 2.2.1 フィルタリング
- **ファイルタイプ別フィルタ**: 拡張子でのフィルタリング
- **日付範囲フィルタ**: 作成日、更新日での期間指定
- **ファイルサイズフィルタ**: サイズ範囲での絞り込み
- **フォルダパスフィルタ**: 特定フォルダ以下に限定

#### 2.2.2 ソート機能
- **関連度順**: 検索キーワードとの一致度
- **更新日順**: 新しい順/古い順
- **ファイル名順**: アルファベット順
- **ファイルサイズ順**: 大きい順/小さい順

### 2.3 ユーザーインターフェース

#### 2.3.1 検索画面
- **検索バー**: オートコンプリート機能付き
- **詳細検索**: 条件を細かく設定できる検索フォーム
- **検索結果一覧**: グリッド表示/リスト表示切り替え
- **ページネーション**: 大量の検索結果の分割表示

#### 2.3.2 ファイルプレビュー
- **ホバープレビュー**: マウスオーバーでのサムネイル表示
- **クイックビュー**: モーダルでのファイル内容確認
- **対応形式**: 画像、PDF、Docuworks

#### 2.3.3 エクスプローラー風UI
- **ツリービュー**: フォルダ構造の階層表示
- **分割ビュー**: 左パネル（ツリー）と右パネル（検索結果）
- **リサイズ可能**: パネルサイズの調整機能

#### 2.3.4 ファイルパス機能
- **フルパス表示**: ファイルの完全なパスを表示
- **パスコピー**: ワンクリックでパスをクリップボードにコピー
- **パス省略表示**: 長いパスの折りたたみ表示

### 2.4 管理機能

#### 2.4.1 インデックス管理
- **定期更新**: 月1回の自動インデックス更新
- **手動更新**: 管理者による任意のタイミングでの更新
- **差分更新**: 変更があったファイルのみを更新
- **更新状況表示**: プログレスバーでの進捗表示

#### 2.4.2 ログ管理
- **検索ログ**: 検索キーワード、検索者、検索日時、結果件数
- **アクセスログ**: ファイルアクセス履歴
- **エラーログ**: システムエラーの記録
- **ログエクスポート**: CSV/JSON形式でのダウンロード

#### 2.4.3 ユーザー管理
- **ユーザー登録/削除**: AWS Cognitoと連携
- **権限管理**: 部署ごとのアクセス制御
- **利用統計**: ユーザーごとの利用状況レポート

## 3. 非機能要件

### 3.1 パフォーマンス要件
- **検索レスポンスタイム**: 10秒以内
- **同時接続数**: 50ユーザー以上
- **システム可用性**: 99.5%以上（営業日ベース）
- **インデックス処理能力**: 10TB/月の処理が可能

### 3.2 セキュリティ要件

#### 3.2.1 認証・認可
- **認証方式**: AWS Cognito
- **多要素認証**: オプションでMFA対応
- **シングルサインオン**: 将来的な拡張を考慮

#### 3.2.2 アクセス制御
- **アカウントベース制御**: ユーザーごとの権限設定
- **部署別アクセス制限**: 特定フォルダへのアクセス制限
- **IPアドレス制限**: 社内ネットワークからのみアクセス可能

#### 3.2.3 データ保護
- **通信暗号化**: HTTPS（TLS 1.3）
- **データ暗号化**: AES-256での保存時暗号化
- **監査ログ**: 全操作の記録と改ざん防止

### 3.3 可用性要件
- **バックアップ**: 日次バックアップ
- **災害対策**: AWSマルチAZ構成
- **障害復旧**: RTO 4時間、RPO 24時間

### 3.4 運用・保守要件
- **監視**: CloudWatchによる24時間監視
- **アラート**: 異常検知時の自動通知
- **メンテナンス**: 月次定期メンテナンス（深夜帯）

### 3.5 拡張性要件
- **スケーラビリティ**: ユーザー数、データ量の増加に対応
- **新規NAS追加**: 設定変更のみで追加可能
- **新規ファイル形式**: プラグイン形式での追加対応

## 4. システム環境要件

### 4.1 NAS環境
- **NAS台数**: 4台
- **総容量**: 約10TB
- **接続方式**: 光回線経由でAWSと接続
- **ファイル数**: 要調査（初期インデックス作成時に確定）

### 4.2 クライアント環境
- **対応ブラウザ**:
  - Chrome（最新版）
  - Edge（最新版）
  - Firefox（最新版）
  - Safari（最新版）
- **画面解像度**: 1366×768以上推奨
- **ネットワーク**: 社内LAN環境

### 4.3 AWS環境
- **リージョン**: 東京リージョン（ap-northeast-1）
- **主要サービス**:
  - EC2/ECS: アプリケーション実行基盤
  - S3: ファイルキャッシュ、インデックスデータ保存
  - RDS/DynamoDB: メタデータ、検索インデックス
  - Lambda: バッチ処理、ファイル処理
  - CloudWatch: ログ管理、監視
  - Cognito: 認証基盤
  - API Gateway: APIエンドポイント管理
  - OpenSearch: 全文検索エンジン

## 5. 制約事項

### 5.1 技術的制約
- **インデックス更新頻度**: 月1回の制限（ネットワーク負荷考慮）
- **ファイルサイズ制限**: 1ファイル最大1GB
- **検索結果表示件数**: 最大10,000件

### 5.2 運用上の制約
- **メンテナンス時間**: 毎月第3日曜日 深夜2:00-6:00
- **サポート時間**: 営業日 9:00-18:00

## 6. プロジェクトスコープ

### 6.1 対象範囲
- NASファイルの検索システム構築
- AWS基盤の構築と設定
- ユーザー管理機能の実装
- 基本的な運用管理機能の提供

### 6.2 対象外範囲
- NASの設定変更や管理
- 既存システムのデータ移行
- ファイル編集機能
- ワークフロー機能

## 7. マイルストーン

### Phase 1: 基本機能実装（3ヶ月）
- 基本検索機能
- ユーザー認証
- シンプルなUI

### Phase 2: 高度な機能実装（2ヶ月）
- 全文検索
- SFCファイル対応
- 詳細フィルタ機能

### Phase 3: AI機能実装（2ヶ月）
- 画像類似検索
- 検索精度向上
- レコメンド機能

### Phase 4: 運用最適化（1ヶ月）
- パフォーマンスチューニング
- 運用ツール整備
- ドキュメント整備

## 8. 成功指標（KPI）

### 8.1 定量的指標
- **検索レスポンスタイム**: 平均5秒以内
- **システム稼働率**: 99.5%以上
- **ユーザー満足度**: 80%以上

### 8.2 定性的指標
- ファイル検索時間の大幅短縮
- 業務効率の向上
- 情報共有の活性化

## 9. リスクと対策

### 9.1 技術リスク
- **リスク**: SFCファイルの解析が困難
- **対策**: 専門ベンダーとの協力、代替手段の検討

### 9.2 運用リスク
- **リスク**: インデックス更新時のネットワーク負荷
- **対策**: 差分更新の実装、深夜帯での実行

### 9.3 セキュリティリスク
- **リスク**: 不正アクセス
- **対策**: 多層防御、定期的なセキュリティ監査

## 10. 今後の検討事項

- モバイル対応の必要性
- 外部システムとの連携要件
- AI機能の拡張（自動タグ付け、要約生成など）
- マルチ言語対応

---

## 改訂履歴

| 版数 | 日付 | 改訂内容 | 作成者 |
|------|------|----------|--------|
| 1.0 | 2025-01-15 | 初版作成 | CIS開発チーム |

---

**承認**

| 役割 | 氏名 | 承認日 | 署名 |
|------|------|--------|------|
| プロジェクトオーナー | | | |
| IT部門責任者 | | | |
| 開発責任者 | | | |
