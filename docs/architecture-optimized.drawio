<mxfile host="app.diagrams.net" modified="2025-01-16T00:00:00.000Z" agent="Claude" version="22.1.16" etag="optimized-architecture-vpc" type="device">
  <diagram name="CIS File Search - Optimized Architecture (VPCå®Œå…¨ç‰ˆ)" id="architecture-optimized-vpc">
    <mxGraphModel dx="2800" dy="2000" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="2000" pageHeight="2200" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />

        <!-- ã‚¿ã‚¤ãƒˆãƒ« -->
        <mxCell id="title" value="CIS File Search Application - æœ€é©åŒ–ç‰ˆã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ï¼ˆVPCå®Œå…¨ç‰ˆï¼‰" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=24;fontStyle=1;fontColor=#232F3E;" vertex="1" parent="1">
          <mxGeometry x="600" y="20" width="800" height="40" as="geometry" />
        </mxCell>

        <!-- ã‚µãƒ–ã‚¿ã‚¤ãƒˆãƒ« -->
        <mxCell id="subtitle" value="Multi-AZ VPC | ãƒ‘ãƒ–ãƒªãƒƒã‚¯ãƒ»ãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆã‚µãƒ–ãƒãƒƒãƒˆ | ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚°ãƒ«ãƒ¼ãƒ— | VPC Endpoints" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=14;fontColor=#5A6C7D;" vertex="1" parent="1">
          <mxGeometry x="600" y="60" width="800" height="30" as="geometry" />
        </mxCell>

        <!-- ==================== ãƒ¬ã‚¤ãƒ¤ãƒ¼1: ãƒ¦ãƒ¼ã‚¶ãƒ¼å±¤ ==================== -->
        <mxCell id="layer-user" value="ãƒ¦ãƒ¼ã‚¶ãƒ¼å±¤" style="swimlane;startSize=30;fillColor=#E1F5FF;strokeColor=#0066CC;fontStyle=1;fontSize=14;" vertex="1" parent="1">
          <mxGeometry x="100" y="120" width="1600" height="100" as="geometry" />
        </mxCell>

        <mxCell id="users" value="ðŸ‘¥ ãƒ¦ãƒ¼ã‚¶ãƒ¼&lt;br&gt;50åä»¥ä¸Š" style="sketch=0;outlineConnect=0;fontColor=#232F3E;gradientColor=none;fillColor=#DD344C;strokeColor=none;dashed=0;verticalLabelPosition=bottom;verticalAlign=top;align=center;html=1;fontSize=12;fontStyle=0;aspect=fixed;pointerEvents=1;shape=mxgraph.aws4.user;" vertex="1" parent="layer-user">
          <mxGeometry x="770" y="35" width="60" height="60" as="geometry" />
        </mxCell>

        <!-- ==================== ãƒ¬ã‚¤ãƒ¤ãƒ¼2: DNSãƒ»ãƒ‰ãƒ¡ã‚¤ãƒ³ç®¡ç†å±¤ ==================== -->
        <mxCell id="layer-dns" value="DNSãƒ»ãƒ‰ãƒ¡ã‚¤ãƒ³ç®¡ç†å±¤" style="swimlane;startSize=30;fillColor=#FFF4E6;strokeColor=#FF9900;fontStyle=1;fontSize=14;" vertex="1" parent="1">
          <mxGeometry x="100" y="240" width="1600" height="140" as="geometry" />
        </mxCell>

        <mxCell id="route53" value="Route 53&lt;br&gt;cis-filesearch.com" style="sketch=0;points=[[0,0,0],[0.25,0,0],[0.5,0,0],[0.75,0,0],[1,0,0],[0,1,0],[0.25,1,0],[0.5,1,0],[0.75,1,0],[1,1,0],[0,0.25,0],[0,0.5,0],[0,0.75,0],[1,0.25,0],[1,0.5,0],[1,0.75,0]];outlineConnect=0;fontColor=#232F3E;gradientColor=#945DF2;gradientDirection=north;fillColor=#5A30B5;strokeColor=#ffffff;dashed=0;verticalLabelPosition=bottom;verticalAlign=top;align=center;html=1;fontSize=12;fontStyle=0;aspect=fixed;shape=mxgraph.aws4.resourceIcon;resIcon=mxgraph.aws4.route_53;" vertex="1" parent="layer-dns">
          <mxGeometry x="450" y="40" width="78" height="78" as="geometry" />
        </mxCell>

        <mxCell id="acm" value="ACM è¨¼æ˜Žæ›¸&lt;br&gt;*.cis-filesearch.com" style="sketch=0;points=[[0,0,0],[0.25,0,0],[0.5,0,0],[0.75,0,0],[1,0,0],[0,1,0],[0.25,1,0],[0.5,1,0],[0.75,1,0],[1,1,0],[0,0.25,0],[0,0.5,0],[0,0.75,0],[1,0.25,0],[1,0.5,0],[1,0.75,0]];outlineConnect=0;fontColor=#232F3E;gradientColor=#F54749;gradientDirection=north;fillColor=#C7131F;strokeColor=#ffffff;dashed=0;verticalLabelPosition=bottom;verticalAlign=top;align=center;html=1;fontSize=12;fontStyle=0;aspect=fixed;shape=mxgraph.aws4.resourceIcon;resIcon=mxgraph.aws4.certificate_manager_3;" vertex="1" parent="layer-dns">
          <mxGeometry x="1050" y="40" width="78" height="78" as="geometry" />
        </mxCell>

        <!-- ==================== ãƒ¬ã‚¤ãƒ¤ãƒ¼3: CDNãƒ»ã‚¨ãƒƒã‚¸å±¤ ==================== -->
        <mxCell id="layer-cdn" value="CDNãƒ»ã‚¨ãƒƒã‚¸å±¤" style="swimlane;startSize=30;fillColor=#FFE6E6;strokeColor=#DD3522;fontStyle=1;fontSize=14;" vertex="1" parent="1">
          <mxGeometry x="100" y="400" width="1600" height="160" as="geometry" />
        </mxCell>

        <mxCell id="waf" value="WAF&lt;br&gt;ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£" style="sketch=0;points=[[0,0,0],[0.25,0,0],[0.5,0,0],[0.75,0,0],[1,0,0],[0,1,0],[0.25,1,0],[0.5,1,0],[0.75,1,0],[1,1,0],[0,0.25,0],[0,0.5,0],[0,0.75,0],[1,0.25,0],[1,0.5,0],[1,0.75,0]];outlineConnect=0;fontColor=#232F3E;gradientColor=#F54749;gradientDirection=north;fillColor=#C7131F;strokeColor=#ffffff;dashed=0;verticalLabelPosition=bottom;verticalAlign=top;align=center;html=1;fontSize=12;fontStyle=0;aspect=fixed;shape=mxgraph.aws4.resourceIcon;resIcon=mxgraph.aws4.waf;" vertex="1" parent="layer-cdn">
          <mxGeometry x="350" y="40" width="78" height="78" as="geometry" />
        </mxCell>

        <mxCell id="cloudfront" value="CloudFront çµ±åˆ&lt;br&gt;/* â†’ S3 Web&lt;br&gt;/api/* â†’ API Gateway" style="sketch=0;points=[[0,0,0],[0.25,0,0],[0.5,0,0],[0.75,0,0],[1,0,0],[0,1,0],[0.25,1,0],[0.5,1,0],[0.75,1,0],[1,1,0],[0,0.25,0],[0,0.5,0],[0,0.75,0],[1,0.25,0],[1,0.5,0],[1,0.75,0]];outlineConnect=0;fontColor=#232F3E;gradientColor=#945DF2;gradientDirection=north;fillColor=#5A30B5;strokeColor=#ffffff;dashed=0;verticalLabelPosition=bottom;verticalAlign=top;align=center;html=1;fontSize=12;fontStyle=0;aspect=fixed;shape=mxgraph.aws4.resourceIcon;resIcon=mxgraph.aws4.cloudfront;" vertex="1" parent="layer-cdn">
          <mxGeometry x="761" y="40" width="78" height="78" as="geometry" />
        </mxCell>

        <mxCell id="cloudfront-note" value="âœ¨ æœ€é©åŒ–: 2ã¤â†’1ã¤çµ±åˆ&lt;br&gt;ã‚³ã‚¹ãƒˆ40%å‰Šæ¸›" style="text;html=1;strokeColor=#FF9900;fillColor=#FFF4E6;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=1;fontSize=11;fontColor=#232F3E;fontStyle=1;" vertex="1" parent="layer-cdn">
          <mxGeometry x="900" y="55" width="180" height="50" as="geometry" />
        </mxCell>

        <!-- ==================== VPCå…¨ä½“ã‚³ãƒ³ãƒ†ãƒŠ ==================== -->
        <mxCell id="vpc-container" value="VPC: 10.0.0.0/16 (cis-filesearch-vpc)&#xa;Multi-AZé«˜å¯ç”¨æ€§æ§‹æˆ" style="swimlane;startSize=50;fillColor=#F0F8FF;strokeColor=#0066CC;fontStyle=1;fontSize=16;strokeWidth=3;" vertex="1" parent="1">
          <mxGeometry x="100" y="600" width="1600" height="1200" as="geometry" />
        </mxCell>

        <!-- ==================== Internet Gateway ==================== -->
        <mxCell id="igw" value="Internet Gateway&lt;br&gt;(IGW)" style="sketch=0;points=[[0,0,0],[0.25,0,0],[0.5,0,0],[0.75,0,0],[1,0,0],[0,1,0],[0.25,1,0],[0.5,1,0],[0.75,1,0],[1,1,0],[0,0.25,0],[0,0.5,0],[0,0.75,0],[1,0.25,0],[1,0.5,0],[1,0.75,0]];outlineConnect=0;fontColor=#232F3E;gradientColor=#945DF2;gradientDirection=north;fillColor=#5A30B5;strokeColor=#ffffff;dashed=0;verticalLabelPosition=bottom;verticalAlign=top;align=center;html=1;fontSize=12;fontStyle=0;aspect=fixed;shape=mxgraph.aws4.resourceIcon;resIcon=mxgraph.aws4.internet_gateway;" vertex="1" parent="vpc-container">
          <mxGeometry x="761" y="60" width="78" height="78" as="geometry" />
        </mxCell>

        <!-- ==================== AZ-1a: ãƒ‘ãƒ–ãƒªãƒƒã‚¯ã‚µãƒ–ãƒãƒƒãƒˆ ==================== -->
        <mxCell id="subnet-public-1a" value="AZ: ap-northeast-1a&#xa;Public Subnet: 10.0.1.0/24" style="swimlane;startSize=40;fillColor=#E8F5E9;strokeColor=#569A31;fontStyle=1;fontSize=13;strokeWidth=2;" vertex="1" parent="vpc-container">
          <mxGeometry x="80" y="170" width="300" height="200" as="geometry" />
        </mxCell>

        <mxCell id="nat-1a" value="NAT Gateway 1a&lt;br&gt;EIP: 203.0.113.1" style="sketch=0;points=[[0,0,0],[0.25,0,0],[0.5,0,0],[0.75,0,0],[1,0,0],[0,1,0],[0.25,1,0],[0.5,1,0],[0.75,1,0],[1,1,0],[0,0.25,0],[0,0.5,0],[0,0.75,0],[1,0.25,0],[1,0.5,0],[1,0.75,0]];outlineConnect=0;fontColor=#232F3E;gradientColor=#945DF2;gradientDirection=north;fillColor=#5A30B5;strokeColor=#ffffff;dashed=0;verticalLabelPosition=bottom;verticalAlign=top;align=center;html=1;fontSize=11;fontStyle=0;aspect=fixed;shape=mxgraph.aws4.resourceIcon;resIcon=mxgraph.aws4.nat_gateway;" vertex="1" parent="subnet-public-1a">
          <mxGeometry x="111" y="60" width="78" height="78" as="geometry" />
        </mxCell>

        <!-- ==================== AZ-1c: ãƒ‘ãƒ–ãƒªãƒƒã‚¯ã‚µãƒ–ãƒãƒƒãƒˆ ==================== -->
        <mxCell id="subnet-public-1c" value="AZ: ap-northeast-1c&#xa;Public Subnet: 10.0.2.0/24" style="swimlane;startSize=40;fillColor=#E8F5E9;strokeColor=#569A31;fontStyle=1;fontSize=13;strokeWidth=2;" vertex="1" parent="vpc-container">
          <mxGeometry x="1220" y="170" width="300" height="200" as="geometry" />
        </mxCell>

        <mxCell id="nat-1c" value="NAT Gateway 1c&lt;br&gt;EIP: 203.0.113.2" style="sketch=0;points=[[0,0,0],[0.25,0,0],[0.5,0,0],[0.75,0,0],[1,0,0],[0,1,0],[0.25,1,0],[0.5,1,0],[0.75,1,0],[1,1,0],[0,0.25,0],[0,0.5,0],[0,0.75,0],[1,0.25,0],[1,0.5,0],[1,0.75,0]];outlineConnect=0;fontColor=#232F3E;gradientColor=#945DF2;gradientDirection=north;fillColor=#5A30B5;strokeColor=#ffffff;dashed=0;verticalLabelPosition=bottom;verticalAlign=top;align=center;html=1;fontSize=11;fontStyle=0;aspect=fixed;shape=mxgraph.aws4.resourceIcon;resIcon=mxgraph.aws4.nat_gateway;" vertex="1" parent="subnet-public-1c">
          <mxGeometry x="111" y="60" width="78" height="78" as="geometry" />
        </mxCell>

        <!-- ==================== AZ-1a: ãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆã‚µãƒ–ãƒãƒƒãƒˆ (Appå±¤) ==================== -->
        <mxCell id="subnet-private-app-1a" value="Private App Subnet 1a: 10.0.11.0/24" style="swimlane;startSize=30;fillColor=#FFF3E0;strokeColor=#FF9900;fontStyle=1;fontSize=12;strokeWidth=2;" vertex="1" parent="vpc-container">
          <mxGeometry x="80" y="410" width="300" height="280" as="geometry" />
        </mxCell>

        <mxCell id="lambda-search-1a" value="Lambda æ¤œç´¢&lt;br&gt;ENI" style="sketch=0;points=[[0,0,0],[0.25,0,0],[0.5,0,0],[0.75,0,0],[1,0,0],[0,1,0],[0.25,1,0],[0.5,1,0],[0.75,1,0],[1,1,0],[0,0.25,0],[0,0.5,0],[0,0.75,0],[1,0.25,0],[1,0.5,0],[1,0.75,0]];outlineConnect=0;fontColor=#232F3E;gradientColor=#F78E04;gradientDirection=north;fillColor=#D05C17;strokeColor=#ffffff;dashed=0;verticalLabelPosition=bottom;verticalAlign=top;align=center;html=1;fontSize=10;fontStyle=0;aspect=fixed;shape=mxgraph.aws4.resourceIcon;resIcon=mxgraph.aws4.lambda;" vertex="1" parent="subnet-private-app-1a">
          <mxGeometry x="30" y="50" width="60" height="60" as="geometry" />
        </mxCell>

        <mxCell id="lambda-auth-1a" value="Lambda èªè¨¼&lt;br&gt;ENI" style="sketch=0;points=[[0,0,0],[0.25,0,0],[0.5,0,0],[0.75,0,0],[1,0,0],[0,1,0],[0.25,1,0],[0.5,1,0],[0.75,1,0],[1,1,0],[0,0.25,0],[0,0.5,0],[0,0.75,0],[1,0.25,0],[1,0.5,0],[1,0.75,0]];outlineConnect=0;fontColor=#232F3E;gradientColor=#F78E04;gradientDirection=north;fillColor=#D05C17;strokeColor=#ffffff;dashed=0;verticalLabelPosition=bottom;verticalAlign=top;align=center;html=1;fontSize=10;fontStyle=0;aspect=fixed;shape=mxgraph.aws4.resourceIcon;resIcon=mxgraph.aws4.lambda;" vertex="1" parent="subnet-private-app-1a">
          <mxGeometry x="30" y="150" width="60" height="60" as="geometry" />
        </mxCell>

        <mxCell id="lambda-file-1a" value="Lambda File&lt;br&gt;ENI" style="sketch=0;points=[[0,0,0],[0.25,0,0],[0.5,0,0],[0.75,0,0],[1,0,0],[0,1,0],[0.25,1,0],[0.5,1,0],[0.75,1,0],[1,1,0],[0,0.25,0],[0,0.5,0],[0,0.75,0],[1,0.25,0],[1,0.5,0],[1,0.75,0]];outlineConnect=0;fontColor=#232F3E;gradientColor=#F78E04;gradientDirection=north;fillColor=#D05C17;strokeColor=#ffffff;dashed=0;verticalLabelPosition=bottom;verticalAlign=top;align=center;html=1;fontSize=10;fontStyle=0;aspect=fixed;shape=mxgraph.aws4.resourceIcon;resIcon=mxgraph.aws4.lambda;" vertex="1" parent="subnet-private-app-1a">
          <mxGeometry x="170" y="50" width="60" height="60" as="geometry" />
        </mxCell>

        <!-- ==================== AZ-1c: ãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆã‚µãƒ–ãƒãƒƒãƒˆ (Appå±¤) ==================== -->
        <mxCell id="subnet-private-app-1c" value="Private App Subnet 1c: 10.0.12.0/24" style="swimlane;startSize=30;fillColor=#FFF3E0;strokeColor=#FF9900;fontStyle=1;fontSize=12;strokeWidth=2;" vertex="1" parent="vpc-container">
          <mxGeometry x="1220" y="410" width="300" height="280" as="geometry" />
        </mxCell>

        <mxCell id="lambda-search-1c" value="Lambda æ¤œç´¢&lt;br&gt;ENI" style="sketch=0;points=[[0,0,0],[0.25,0,0],[0.5,0,0],[0.75,0,0],[1,0,0],[0,1,0],[0.25,1,0],[0.5,1,0],[0.75,1,0],[1,1,0],[0,0.25,0],[0,0.5,0],[0,0.75,0],[1,0.25,0],[1,0.5,0],[1,0.75,0]];outlineConnect=0;fontColor=#232F3E;gradientColor=#F78E04;gradientDirection=north;fillColor=#D05C17;strokeColor=#ffffff;dashed=0;verticalLabelPosition=bottom;verticalAlign=top;align=center;html=1;fontSize=10;fontStyle=0;aspect=fixed;shape=mxgraph.aws4.resourceIcon;resIcon=mxgraph.aws4.lambda;" vertex="1" parent="subnet-private-app-1c">
          <mxGeometry x="30" y="50" width="60" height="60" as="geometry" />
        </mxCell>

        <mxCell id="lambda-index-1c" value="Lambda Index&lt;br&gt;ENI" style="sketch=0;points=[[0,0,0],[0.25,0,0],[0.5,0,0],[0.75,0,0],[1,0,0],[0,1,0],[0.25,1,0],[0.5,1,0],[0.75,1,0],[1,1,0],[0,0.25,0],[0,0.5,0],[0,0.75,0],[1,0.25,0],[1,0.5,0],[1,0.75,0]];outlineConnect=0;fontColor=#232F3E;gradientColor=#F78E04;gradientDirection=north;fillColor=#D05C17;strokeColor=#ffffff;dashed=0;verticalLabelPosition=bottom;verticalAlign=top;align=center;html=1;fontSize=10;fontStyle=0;aspect=fixed;shape=mxgraph.aws4.resourceIcon;resIcon=mxgraph.aws4.lambda;" vertex="1" parent="subnet-private-app-1c">
          <mxGeometry x="170" y="50" width="60" height="60" as="geometry" />
        </mxCell>

        <!-- ==================== AZ-1a: ãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆã‚µãƒ–ãƒãƒƒãƒˆ (Dataå±¤) ==================== -->
        <mxCell id="subnet-private-data-1a" value="Private Data Subnet 1a: 10.0.21.0/24" style="swimlane;startSize=30;fillColor=#E3F2FD;strokeColor=#527FFF;fontStyle=1;fontSize=12;strokeWidth=2;" vertex="1" parent="vpc-container">
          <mxGeometry x="80" y="730" width="300" height="400" as="geometry" />
        </mxCell>

        <mxCell id="rds-1a" value="RDS Primary&lt;br&gt;PostgreSQL&lt;br&gt;Multi-AZ" style="sketch=0;points=[[0,0,0],[0.25,0,0],[0.5,0,0],[0.75,0,0],[1,0,0],[0,1,0],[0.25,1,0],[0.5,1,0],[0.75,1,0],[1,1,0],[0,0.25,0],[0,0.5,0],[0,0.75,0],[1,0.25,0],[1,0.5,0],[1,0.75,0]];outlineConnect=0;fontColor=#232F3E;gradientColor=#4D72F3;gradientDirection=north;fillColor=#3334B9;strokeColor=#ffffff;dashed=0;verticalLabelPosition=bottom;verticalAlign=top;align=center;html=1;fontSize=10;fontStyle=0;aspect=fixed;shape=mxgraph.aws4.resourceIcon;resIcon=mxgraph.aws4.rds;" vertex="1" parent="subnet-private-data-1a">
          <mxGeometry x="30" y="50" width="70" height="70" as="geometry" />
        </mxCell>

        <mxCell id="redis-1a" value="Redis Primary&lt;br&gt;cache.t3.medium" style="sketch=0;points=[[0,0,0],[0.25,0,0],[0.5,0,0],[0.75,0,0],[1,0,0],[0,1,0],[0.25,1,0],[0.5,1,0],[0.75,1,0],[1,1,0],[0,0.25,0],[0,0.5,0],[0,0.75,0],[1,0.25,0],[1,0.5,0],[1,0.75,0]];outlineConnect=0;fontColor=#232F3E;gradientColor=#4D72F3;gradientDirection=north;fillColor=#3334B9;strokeColor=#ffffff;dashed=0;verticalLabelPosition=bottom;verticalAlign=top;align=center;html=1;fontSize=10;fontStyle=0;aspect=fixed;shape=mxgraph.aws4.resourceIcon;resIcon=mxgraph.aws4.elasticache;" vertex="1" parent="subnet-private-data-1a">
          <mxGeometry x="30" y="170" width="70" height="70" as="geometry" />
        </mxCell>

        <mxCell id="opensearch-1a" value="OpenSearch&lt;br&gt;Node 1" style="sketch=0;points=[[0,0,0],[0.25,0,0],[0.5,0,0],[0.75,0,0],[1,0,0],[0,1,0],[0.25,1,0],[0.5,1,0],[0.75,1,0],[1,1,0],[0,0.25,0],[0,0.5,0],[0,0.75,0],[1,0.25,0],[1,0.5,0],[1,0.75,0]];outlineConnect=0;fontColor=#232F3E;gradientColor=#4AB29A;gradientDirection=north;fillColor=#116D5B;strokeColor=#ffffff;dashed=0;verticalLabelPosition=bottom;verticalAlign=top;align=center;html=1;fontSize=10;fontStyle=0;aspect=fixed;shape=mxgraph.aws4.resourceIcon;resIcon=mxgraph.aws4.opensearch_service;" vertex="1" parent="subnet-private-data-1a">
          <mxGeometry x="30" y="290" width="70" height="70" as="geometry" />
        </mxCell>

        <!-- ==================== AZ-1c: ãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆã‚µãƒ–ãƒãƒƒãƒˆ (Dataå±¤) ==================== -->
        <mxCell id="subnet-private-data-1c" value="Private Data Subnet 1c: 10.0.22.0/24" style="swimlane;startSize=30;fillColor=#E3F2FD;strokeColor=#527FFF;fontStyle=1;fontSize=12;strokeWidth=2;" vertex="1" parent="vpc-container">
          <mxGeometry x="1220" y="730" width="300" height="400" as="geometry" />
        </mxCell>

        <mxCell id="rds-1c" value="RDS Standby&lt;br&gt;PostgreSQL&lt;br&gt;Multi-AZ" style="sketch=0;points=[[0,0,0],[0.25,0,0],[0.5,0,0],[0.75,0,0],[1,0,0],[0,1,0],[0.25,1,0],[0.5,1,0],[0.75,1,0],[1,1,0],[0,0.25,0],[0,0.5,0],[0,0.75,0],[1,0.25,0],[1,0.5,0],[1,0.75,0]];outlineConnect=0;fontColor=#232F3E;gradientColor=#4D72F3;gradientDirection=north;fillColor=#3334B9;strokeColor=#ffffff;dashed=0;verticalLabelPosition=bottom;verticalAlign=top;align=center;html=1;fontSize=10;fontStyle=0;aspect=fixed;shape=mxgraph.aws4.resourceIcon;resIcon=mxgraph.aws4.rds;" vertex="1" parent="subnet-private-data-1c">
          <mxGeometry x="30" y="50" width="70" height="70" as="geometry" />
        </mxCell>

        <mxCell id="redis-1c" value="Redis Replica&lt;br&gt;cache.t3.medium" style="sketch=0;points=[[0,0,0],[0.25,0,0],[0.5,0,0],[0.75,0,0],[1,0,0],[0,1,0],[0.25,1,0],[0.5,1,0],[0.75,1,0],[1,1,0],[0,0.25,0],[0,0.5,0],[0,0.75,0],[1,0.25,0],[1,0.5,0],[1,0.75,0]];outlineConnect=0;fontColor=#232F3E;gradientColor=#4D72F3;gradientDirection=north;fillColor=#3334B9;strokeColor=#ffffff;dashed=0;verticalLabelPosition=bottom;verticalAlign=top;align=center;html=1;fontSize=10;fontStyle=0;aspect=fixed;shape=mxgraph.aws4.resourceIcon;resIcon=mxgraph.aws4.elasticache;" vertex="1" parent="subnet-private-data-1c">
          <mxGeometry x="30" y="170" width="70" height="70" as="geometry" />
        </mxCell>

        <mxCell id="opensearch-1c" value="OpenSearch&lt;br&gt;Node 2-3" style="sketch=0;points=[[0,0,0],[0.25,0,0],[0.5,0,0],[0.75,0,0],[1,0,0],[0,1,0],[0.25,1,0],[0.5,1,0],[0.75,1,0],[1,1,0],[0,0.25,0],[0,0.5,0],[0,0.75,0],[1,0.25,0],[1,0.5,0],[1,0.75,0]];outlineConnect=0;fontColor=#232F3E;gradientColor=#4AB29A;gradientDirection=north;fillColor=#116D5B;strokeColor=#ffffff;dashed=0;verticalLabelPosition=bottom;verticalAlign=top;align=center;html=1;fontSize=10;fontStyle=0;aspect=fixed;shape=mxgraph.aws4.resourceIcon;resIcon=mxgraph.aws4.opensearch_service;" vertex="1" parent="subnet-private-data-1c">
          <mxGeometry x="30" y="290" width="70" height="70" as="geometry" />
        </mxCell>

        <!-- ==================== VPC Endpoints ==================== -->
        <mxCell id="vpce-section" value="VPC Endpoints" style="swimlane;startSize=30;fillColor=#F5F0FF;strokeColor=#9C27B0;fontStyle=1;fontSize=12;" vertex="1" parent="vpc-container">
          <mxGeometry x="450" y="410" width="700" height="280" as="geometry" />
        </mxCell>

        <mxCell id="vpce-s3" value="S3 Gateway Endpoint&lt;br&gt;ç„¡æ–™&lt;br&gt;NATä¸è¦" style="sketch=0;points=[[0,0,0],[0.25,0,0],[0.5,0,0],[0.75,0,0],[1,0,0],[0,1,0],[0.25,1,0],[0.5,1,0],[0.75,1,0],[1,1,0],[0,0.25,0],[0,0.5,0],[0,0.75,0],[1,0.25,0],[1,0.5,0],[1,0.75,0]];outlineConnect=0;fontColor=#232F3E;gradientColor=#60A337;gradientDirection=north;fillColor=#277116;strokeColor=#ffffff;dashed=0;verticalLabelPosition=bottom;verticalAlign=top;align=center;html=1;fontSize=10;fontStyle=0;aspect=fixed;shape=mxgraph.aws4.resourceIcon;resIcon=mxgraph.aws4.s3;" vertex="1" parent="vpce-section">
          <mxGeometry x="100" y="80" width="70" height="70" as="geometry" />
        </mxCell>

        <mxCell id="vpce-s3-note" value="âœ¨ ã‚³ã‚¹ãƒˆå‰Šæ¸›90%&lt;br&gt;ãƒ¬ã‚¤ãƒ†ãƒ³ã‚·å‰Šæ¸›90%" style="text;html=1;strokeColor=#569A31;fillColor=#E8F5E9;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=1;fontSize=9;fontColor=#232F3E;fontStyle=1;" vertex="1" parent="vpce-section">
          <mxGeometry x="75" y="165" width="120" height="35" as="geometry" />
        </mxCell>

        <mxCell id="vpce-dynamodb" value="DynamoDB Gateway&lt;br&gt;Endpoint&lt;br&gt;ç„¡æ–™" style="sketch=0;points=[[0,0,0],[0.25,0,0],[0.5,0,0],[0.75,0,0],[1,0,0],[0,1,0],[0.25,1,0],[0.5,1,0],[0.75,1,0],[1,1,0],[0,0.25,0],[0,0.5,0],[0,0.75,0],[1,0.25,0],[1,0.5,0],[1,0.75,0]];outlineConnect=0;fontColor=#232F3E;gradientColor=#4D72F3;gradientDirection=north;fillColor=#3334B9;strokeColor=#ffffff;dashed=0;verticalLabelPosition=bottom;verticalAlign=top;align=center;html=1;fontSize=10;fontStyle=0;aspect=fixed;shape=mxgraph.aws4.resourceIcon;resIcon=mxgraph.aws4.dynamodb;" vertex="1" parent="vpce-section">
          <mxGeometry x="315" y="80" width="70" height="70" as="geometry" />
        </mxCell>

        <mxCell id="vpce-logs" value="CloudWatch Logs&lt;br&gt;Interface Endpoint&lt;br&gt;$7/æœˆ" style="sketch=0;points=[[0,0,0],[0.25,0,0],[0.5,0,0],[0.75,0,0],[1,0,0],[0,1,0],[0.25,1,0],[0.5,1,0],[0.75,1,0],[1,1,0],[0,0.25,0],[0,0.5,0],[0,0.75,0],[1,0.25,0],[1,0.5,0],[1,0.75,0]];outlineConnect=0;fontColor=#232F3E;gradientColor=#F54749;gradientDirection=north;fillColor=#C7131F;strokeColor=#ffffff;dashed=0;verticalLabelPosition=bottom;verticalAlign=top;align=center;html=1;fontSize=10;fontStyle=0;aspect=fixed;shape=mxgraph.aws4.resourceIcon;resIcon=mxgraph.aws4.cloudwatch_2;" vertex="1" parent="vpce-section">
          <mxGeometry x="530" y="80" width="70" height="70" as="geometry" />
        </mxCell>

        <!-- ==================== VPCå¤–ã®ã‚µãƒ¼ãƒ“ã‚¹ (S3 Web, API Gateway, etc.) ==================== -->
        <mxCell id="s3-web-outside" value="S3 Web Bucket&lt;br&gt;Next.js é™çš„ãƒ•ã‚¡ã‚¤ãƒ«&lt;br&gt;CloudFront OAIçµŒç”±" style="sketch=0;points=[[0,0,0],[0.25,0,0],[0.5,0,0],[0.75,0,0],[1,0,0],[0,1,0],[0.25,1,0],[0.5,1,0],[0.75,1,0],[1,1,0],[0,0.25,0],[0,0.5,0],[0,0.75,0],[1,0.25,0],[1,0.5,0],[1,0.75,0]];outlineConnect=0;fontColor=#232F3E;gradientColor=#60A337;gradientDirection=north;fillColor=#277116;strokeColor=#ffffff;dashed=0;verticalLabelPosition=bottom;verticalAlign=top;align=center;html=1;fontSize=11;fontStyle=0;aspect=fixed;shape=mxgraph.aws4.resourceIcon;resIcon=mxgraph.aws4.s3;" vertex="1" parent="1">
          <mxGeometry x="250" y="1850" width="78" height="78" as="geometry" />
        </mxCell>

        <mxCell id="api-gateway-outside" value="API Gateway&lt;br&gt;REST API&lt;br&gt;/api/v1" style="sketch=0;points=[[0,0,0],[0.25,0,0],[0.5,0,0],[0.75,0,0],[1,0,0],[0,1,0],[0.25,1,0],[0.5,1,0],[0.75,1,0],[1,1,0],[0,0.25,0],[0,0.5,0],[0,0.75,0],[1,0.25,0],[1,0.5,0],[1,0.75,0]];outlineConnect=0;fontColor=#232F3E;gradientColor=#FF4F8B;gradientDirection=north;fillColor=#BC1356;strokeColor=#ffffff;dashed=0;verticalLabelPosition=bottom;verticalAlign=top;align=center;html=1;fontSize=11;fontStyle=0;aspect=fixed;shape=mxgraph.aws4.resourceIcon;resIcon=mxgraph.aws4.api_gateway;" vertex="1" parent="1">
          <mxGeometry x="500" y="1850" width="78" height="78" as="geometry" />
        </mxCell>

        <mxCell id="s3-cache-outside" value="S3 Cache Bucket&lt;br&gt;ã‚µãƒ ãƒã‚¤ãƒ«ãƒ»ãƒ•ã‚¡ã‚¤ãƒ«&lt;br&gt;30æ—¥TTL" style="sketch=0;points=[[0,0,0],[0.25,0,0],[0.5,0,0],[0.75,0,0],[1,0,0],[0,1,0],[0.25,1,0],[0.5,1,0],[0.75,1,0],[1,1,0],[0,0.25,0],[0,0.5,0],[0,0.75,0],[1,0.25,0],[1,0.5,0],[1,0.75,0]];outlineConnect=0;fontColor=#232F3E;gradientColor=#60A337;gradientDirection=north;fillColor=#277116;strokeColor=#ffffff;dashed=0;verticalLabelPosition=bottom;verticalAlign=top;align=center;html=1;fontSize=11;fontStyle=0;aspect=fixed;shape=mxgraph.aws4.resourceIcon;resIcon=mxgraph.aws4.s3;" vertex="1" parent="1">
          <mxGeometry x="750" y="1850" width="78" height="78" as="geometry" />
        </mxCell>

        <mxCell id="s3-cache-note-outside" value="âœ¨ ã‚­ãƒ£ãƒƒã‚·ãƒ¥ãƒ•ã‚¡ãƒ¼ã‚¹ãƒˆ&lt;br&gt;90%ãƒ’ãƒƒãƒˆçŽ‡" style="text;html=1;strokeColor=#569A31;fillColor=#E8F5E9;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=1;fontSize=10;fontColor=#232F3E;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="729" y="1940" width="120" height="40" as="geometry" />
        </mxCell>

        <mxCell id="dynamodb-outside" value="DynamoDB&lt;br&gt;4ãƒ†ãƒ¼ãƒ–ãƒ«&lt;br&gt;BatchGetItem" style="sketch=0;points=[[0,0,0],[0.25,0,0],[0.5,0,0],[0.75,0,0],[1,0,0],[0,1,0],[0.25,1,0],[0.5,1,0],[0.75,1,0],[1,1,0],[0,0.25,0],[0,0.5,0],[0,0.75,0],[1,0.25,0],[1,0.5,0],[1,0.75,0]];outlineConnect=0;fontColor=#232F3E;gradientColor=#4D72F3;gradientDirection=north;fillColor=#3334B9;strokeColor=#ffffff;dashed=0;verticalLabelPosition=bottom;verticalAlign=top;align=center;html=1;fontSize=11;fontStyle=0;aspect=fixed;shape=mxgraph.aws4.resourceIcon;resIcon=mxgraph.aws4.dynamodb;" vertex="1" parent="1">
          <mxGeometry x="1000" y="1850" width="78" height="78" as="geometry" />
        </mxCell>

        <mxCell id="cognito-outside" value="Cognito&lt;br&gt;JWTèªè¨¼&lt;br&gt;User Pool" style="sketch=0;points=[[0,0,0],[0.25,0,0],[0.5,0,0],[0.75,0,0],[1,0,0],[0,1,0],[0.25,1,0],[0.5,1,0],[0.75,1,0],[1,1,0],[0,0.25,0],[0,0.5,0],[0,0.75,0],[1,0.25,0],[1,0.5,0],[1,0.75,0]];outlineConnect=0;fontColor=#232F3E;gradientColor=#F54749;gradientDirection=north;fillColor=#C7131F;strokeColor=#ffffff;dashed=0;verticalLabelPosition=bottom;verticalAlign=top;align=center;html=1;fontSize=11;fontStyle=0;aspect=fixed;shape=mxgraph.aws4.resourceIcon;resIcon=mxgraph.aws4.cognito;" vertex="1" parent="1">
          <mxGeometry x="1250" y="1850" width="78" height="78" as="geometry" />
        </mxCell>

        <mxCell id="nas-outside" value="ðŸ’¾ NAS 4å°&lt;br&gt;10TB&lt;br&gt;VPNæŽ¥ç¶š" style="sketch=0;outlineConnect=0;fontColor=#232F3E;gradientColor=#4D27AA;gradientDirection=north;fillColor=#232F3E;strokeColor=#ffffff;dashed=0;verticalLabelPosition=bottom;verticalAlign=top;align=center;html=1;fontSize=11;fontStyle=0;aspect=fixed;shape=mxgraph.aws4.resourceIcon;resIcon=mxgraph.aws4.storage_gateway;" vertex="1" parent="1">
          <mxGeometry x="1500" y="1850" width="78" height="78" as="geometry" />
        </mxCell>

        <!-- ==================== æŽ¥ç¶šç·š (ç°¡ç•¥åŒ–) ==================== -->

        <!-- ãƒ¦ãƒ¼ã‚¶ãƒ¼ â†’ Route 53 -->
        <mxCell id="conn-user-r53" value="DNSè§£æ±º" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#0066CC;strokeWidth=2;fontSize=11;fontColor=#232F3E;" edge="1" parent="1" source="users" target="route53">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <!-- Route 53 â†’ CloudFront -->
        <mxCell id="conn-r53-cf" value="ALIAS" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#0066CC;strokeWidth=2;fontSize=11;fontColor=#232F3E;" edge="1" parent="1" source="route53" target="cloudfront">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <!-- CloudFront â†’ IGW -->
        <mxCell id="conn-cf-igw" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#0066CC;strokeWidth=2;" edge="1" parent="1" source="cloudfront" target="igw">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <!-- IGW â†’ NAT Gateways -->
        <mxCell id="conn-igw-nat1a" value="Route" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#569A31;strokeWidth=2;fontSize=10;fontColor=#232F3E;" edge="1" parent="1" source="igw" target="nat-1a">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <mxCell id="conn-igw-nat1c" value="Route" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#569A31;strokeWidth=2;fontSize=10;fontColor=#232F3E;" edge="1" parent="1" source="igw" target="nat-1c">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <!-- NAT â†’ Lambda (ç°¡ç•¥) -->
        <mxCell id="conn-nat1a-lambda" value="0.0.0.0/0" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#FF9900;strokeWidth=2;fontSize=9;fontColor=#232F3E;dashed=1;" edge="1" parent="1" source="nat-1a" target="lambda-search-1a">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <!-- Lambda â†’ RDS/Redis/OpenSearch (ä»£è¡¨ä¾‹) -->
        <mxCell id="conn-lambda-rds" value="5432" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#527FFF;strokeWidth=2;fontSize=9;fontColor=#232F3E;" edge="1" parent="1" source="lambda-search-1a" target="rds-1a">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <mxCell id="conn-lambda-redis" value="6379" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#D82C20;strokeWidth=2;fontSize=9;fontColor=#232F3E;" edge="1" parent="1" source="lambda-search-1a" target="redis-1a">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <mxCell id="conn-lambda-os" value="443" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#005EB8;strokeWidth=2;fontSize=9;fontColor=#232F3E;" edge="1" parent="1" source="lambda-search-1a" target="opensearch-1a">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <!-- Lambda â†’ VPC Endpoints (ä»£è¡¨ä¾‹) -->
        <mxCell id="conn-lambda-vpce-s3" value="VPC Endpoint" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#569A31;strokeWidth=2;fontSize=9;fontColor=#232F3E;dashed=1;" edge="1" parent="1" source="lambda-search-1a" target="vpce-s3">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <!-- RDS Multi-AZ Replication -->
        <mxCell id="conn-rds-repl" value="åŒæœŸãƒ¬ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#3334B9;strokeWidth=2;fontSize=9;fontColor=#232F3E;dashed=1;dashPattern=5 5;" edge="1" parent="1" source="rds-1a" target="rds-1c">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <!-- Redis Replication -->
        <mxCell id="conn-redis-repl" value="éžåŒæœŸãƒ¬ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#D82C20;strokeWidth=2;fontSize=9;fontColor=#232F3E;dashed=1;dashPattern=5 5;" edge="1" parent="1" source="redis-1a" target="redis-1c">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <!-- OpenSearch Cluster -->
        <mxCell id="conn-os-cluster" value="ã‚¯ãƒ©ã‚¹ã‚¿" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#005EB8;strokeWidth=2;fontSize=9;fontColor=#232F3E;dashed=1;dashPattern=5 5;" edge="1" parent="1" source="opensearch-1a" target="opensearch-1c">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <!-- ==================== æœ€é©åŒ–ãƒã‚¤ãƒ©ã‚¤ãƒˆ ==================== -->
        <mxCell id="highlight-box" value="ðŸŽ¯ VPCãƒ»ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯æœ€é©åŒ–ã®æˆæžœ" style="swimlane;startSize=40;fillColor=#FFFACD;strokeColor=#FFD700;fontStyle=1;fontSize=15;fontColor=#8B4513;" vertex="1" parent="1">
          <mxGeometry x="100" y="2000" width="450" height="300" as="geometry" />
        </mxCell>

        <mxCell id="highlight-vpc-1" value="âœ… Multi-AZæ§‹æˆ: 99.99%å¯ç”¨æ€§" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=12;fontColor=#232F3E;fontStyle=1;" vertex="1" parent="highlight-box">
          <mxGeometry x="15" y="50" width="420" height="25" as="geometry" />
        </mxCell>

        <mxCell id="highlight-vpc-2" value="âœ… NAT Gatewayå†—é•·åŒ–: å®Œå…¨HA" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=12;fontColor=#232F3E;fontStyle=1;" vertex="1" parent="highlight-box">
          <mxGeometry x="15" y="85" width="420" height="25" as="geometry" />
        </mxCell>

        <mxCell id="highlight-vpc-3" value="âœ… VPC Gateway Endpoint: ã‚³ã‚¹ãƒˆ90%å‰Šæ¸›" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=12;fontColor=#232F3E;fontStyle=1;" vertex="1" parent="highlight-box">
          <mxGeometry x="15" y="120" width="420" height="25" as="geometry" />
        </mxCell>

        <mxCell id="highlight-vpc-4" value="âœ… Hyperplane ENI: Lambdaèµ·å‹•1ç§’ä»¥ä¸‹" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=12;fontColor=#232F3E;fontStyle=1;" vertex="1" parent="highlight-box">
          <mxGeometry x="15" y="155" width="420" height="25" as="geometry" />
        </mxCell>

        <mxCell id="highlight-vpc-5" value="âœ… ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚°ãƒ«ãƒ¼ãƒ—: æœ€å°æ¨©é™ã®åŽŸå‰‡" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=12;fontColor=#232F3E;fontStyle=1;" vertex="1" parent="highlight-box">
          <mxGeometry x="15" y="190" width="420" height="25" as="geometry" />
        </mxCell>

        <mxCell id="highlight-vpc-6" value="âœ… Site-to-Site VPN: Direct Connectã‚ˆã‚Š87%å‰Šæ¸›" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=12;fontColor=#232F3E;fontStyle=1;" vertex="1" parent="highlight-box">
          <mxGeometry x="15" y="225" width="420" height="25" as="geometry" />
        </mxCell>

        <mxCell id="highlight-vpc-cost" value="ðŸ’° VPCã‚³ã‚¹ãƒˆ: $121-126/æœˆ (VPNå«ã‚€)" style="text;html=1;strokeColor=#FFD700;fillColor=#FFFACD;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=1;fontSize=13;fontColor=#8B4513;fontStyle=1;" vertex="1" parent="highlight-box">
          <mxGeometry x="15" y="260" width="420" height="30" as="geometry" />
        </mxCell>

        <!-- ==================== å‡¡ä¾‹ ==================== -->
        <mxCell id="legend-box" value="å‡¡ä¾‹" style="swimlane;startSize=30;fillColor=#F5F5F5;strokeColor=#999999;fontStyle=1;fontSize=14;" vertex="1" parent="1">
          <mxGeometry x="600" y="2000" width="400" height="300" as="geometry" />
        </mxCell>

        <mxCell id="legend-vpc-title" value="VPCãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯æ§‹æˆ" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=12;fontColor=#232F3E;fontStyle=1;" vertex="1" parent="legend-box">
          <mxGeometry x="15" y="40" width="370" height="20" as="geometry" />
        </mxCell>

        <mxCell id="legend-vpc-1" value="ðŸŸ¢ Public Subnet: Internet GatewayçµŒç”±" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=11;fontColor=#569A31;" vertex="1" parent="legend-box">
          <mxGeometry x="25" y="70" width="360" height="20" as="geometry" />
        </mxCell>

        <mxCell id="legend-vpc-2" value="ðŸŸ  Private App Subnet: Lambda ENIé…ç½®" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=11;fontColor=#FF9900;" vertex="1" parent="legend-box">
          <mxGeometry x="25" y="100" width="360" height="20" as="geometry" />
        </mxCell>

        <mxCell id="legend-vpc-3" value="ðŸ”µ Private Data Subnet: RDS/Redis/OpenSearch" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=11;fontColor=#527FFF;" vertex="1" parent="legend-box">
          <mxGeometry x="25" y="130" width="360" height="20" as="geometry" />
        </mxCell>

        <mxCell id="legend-vpc-4" value="ðŸŸ£ VPC Endpoints: S3/DynamoDB (Gateway)ç„¡æ–™" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=11;fontColor=#9C27B0;" vertex="1" parent="legend-box">
          <mxGeometry x="25" y="160" width="360" height="20" as="geometry" />
        </mxCell>

        <mxCell id="legend-vpc-5" value="" style="endArrow=classic;html=1;rounded=0;strokeColor=#527FFF;strokeWidth=2;" edge="1" parent="legend-box">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="25" y="200" as="sourcePoint" />
            <mxPoint x="75" y="200" as="targetPoint" />
          </mxGeometry>
        </mxCell>

        <mxCell id="legend-vpc-5-text" value="VPCå†…é€šä¿¡ï¼ˆãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆIPï¼‰" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=11;" vertex="1" parent="legend-box">
          <mxGeometry x="85" y="190" width="300" height="20" as="geometry" />
        </mxCell>

        <mxCell id="legend-vpc-6" value="" style="endArrow=classic;html=1;rounded=0;strokeColor=#999999;strokeWidth=1;dashed=1;dashPattern=5 5;" edge="1" parent="legend-box">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="25" y="235" as="sourcePoint" />
            <mxPoint x="75" y="235" as="targetPoint" />
          </mxGeometry>
        </mxCell>

        <mxCell id="legend-vpc-6-text" value="ãƒ¬ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ï¼ˆéžåŒæœŸï¼‰" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=11;" vertex="1" parent="legend-box">
          <mxGeometry x="85" y="225" width="300" height="20" as="geometry" />
        </mxCell>

        <mxCell id="legend-vpc-note" value="ðŸ“„ è©³ç´°: architecture-optimized.md ã‚»ã‚¯ã‚·ãƒ§ãƒ³4.3" style="text;html=1;strokeColor=#999999;fillColor=#F5F5F5;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=1;fontSize=10;fontColor=#666666;fontStyle=2;" vertex="1" parent="legend-box">
          <mxGeometry x="15" y="260" width="370" height="30" as="geometry" />
        </mxCell>

        <!-- ==================== ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯æƒ…å ±ãƒœãƒƒã‚¯ã‚¹ ==================== -->
        <mxCell id="network-info" value="ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯æ§‹æˆæƒ…å ±" style="swimlane;startSize=30;fillColor=#E8F5E9;strokeColor=#569A31;fontStyle=1;fontSize=14;" vertex="1" parent="1">
          <mxGeometry x="1050" y="2000" width="550" height="300" as="geometry" />
        </mxCell>

        <mxCell id="network-info-1" value="CIDR: 10.0.0.0/16 (65,536 IPs)" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=11;fontColor=#232F3E;fontFamily=Courier New;" vertex="1" parent="network-info">
          <mxGeometry x="15" y="40" width="520" height="20" as="geometry" />
        </mxCell>

        <mxCell id="network-info-2" value="AZ: ap-northeast-1a, ap-northeast-1c" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=11;fontColor=#232F3E;fontFamily=Courier New;" vertex="1" parent="network-info">
          <mxGeometry x="15" y="65" width="520" height="20" as="geometry" />
        </mxCell>

        <mxCell id="network-info-3" value="Public Subnets: 10.0.1.0/24, 10.0.2.0/24" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=11;fontColor=#569A31;fontFamily=Courier New;" vertex="1" parent="network-info">
          <mxGeometry x="15" y="90" width="520" height="20" as="geometry" />
        </mxCell>

        <mxCell id="network-info-4" value="Private App Subnets: 10.0.11.0/24, 10.0.12.0/24" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=11;fontColor=#FF9900;fontFamily=Courier New;" vertex="1" parent="network-info">
          <mxGeometry x="15" y="115" width="520" height="20" as="geometry" />
        </mxCell>

        <mxCell id="network-info-5" value="Private Data Subnets: 10.0.21.0/24, 10.0.22.0/24" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=11;fontColor=#527FFF;fontFamily=Courier New;" vertex="1" parent="network-info">
          <mxGeometry x="15" y="140" width="520" height="20" as="geometry" />
        </mxCell>

        <mxCell id="network-info-6" value="NAT Gateways: 2 (AZ-1a, AZ-1c)" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=11;fontColor=#232F3E;fontFamily=Courier New;" vertex="1" parent="network-info">
          <mxGeometry x="15" y="170" width="520" height="20" as="geometry" />
        </mxCell>

        <mxCell id="network-info-7" value="VPC Gateway Endpoints: S3, DynamoDB (ç„¡æ–™)" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=11;fontColor=#9C27B0;fontFamily=Courier New;" vertex="1" parent="network-info">
          <mxGeometry x="15" y="195" width="520" height="20" as="geometry" />
        </mxCell>

        <mxCell id="network-info-8" value="VPC Interface Endpoints: CloudWatch Logs ($7/æœˆ, ã‚ªãƒ—ã‚·ãƒ§ãƒ³)" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=11;fontColor=#9C27B0;fontFamily=Courier New;" vertex="1" parent="network-info">
          <mxGeometry x="15" y="220" width="520" height="20" as="geometry" />
        </mxCell>

        <mxCell id="network-info-9" value="Security Groups: Lambda, RDS, Redis, OpenSearch, VPC Endpoint" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=11;fontColor=#DD344C;fontFamily=Courier New;" vertex="1" parent="network-info">
          <mxGeometry x="15" y="250" width="520" height="20" as="geometry" />
        </mxCell>

        <mxCell id="network-info-10" value="VPN Connection: Site-to-Site IPsec (2 Tunnels, 99.95%å¯ç”¨æ€§)" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=11;fontColor=#FF6B6B;fontFamily=Courier New;fontStyle=1;" vertex="1" parent="network-info">
          <mxGeometry x="15" y="275" width="520" height="20" as="geometry" />
        </mxCell>

        <!-- ==================== ã‚ªãƒ³ãƒ—ãƒ¬ãƒŸã‚¹NASæŽ¥ç¶šã‚¨ãƒªã‚¢ ==================== -->
        <mxCell id="onprem-area" value="ã‚ªãƒ³ãƒ—ãƒ¬ãƒŸã‚¹ç’°å¢ƒ (10.1.0.0/16)" style="swimlane;startSize=40;fillColor=#FFE6E6;strokeColor=#FF6B6B;fontStyle=1;fontSize=14;strokeWidth=3;dashed=1;dashPattern=8 8;" vertex="1" parent="1">
          <mxGeometry x="100" y="2350" width="450" height="300" as="geometry" />
        </mxCell>

        <mxCell id="nas-onprem" value="ðŸ’¾ NAS 4å°&lt;br&gt;10TB&lt;br&gt;10.1.0.10-13&lt;br&gt;SMB/CIFS (Port 445)" style="sketch=0;outlineConnect=0;fontColor=#232F3E;gradientColor=#4D27AA;gradientDirection=north;fillColor=#232F3E;strokeColor=#ffffff;dashed=0;verticalLabelPosition=bottom;verticalAlign=top;align=center;html=1;fontSize=11;fontStyle=1;aspect=fixed;shape=mxgraph.aws4.resourceIcon;resIcon=mxgraph.aws4.storage_gateway;" vertex="1" parent="onprem-area">
          <mxGeometry x="60" y="120" width="80" height="80" as="geometry" />
        </mxCell>

        <mxCell id="cgw" value="Customer Gateway&lt;br&gt;(CGW)&lt;br&gt;VPNãƒ«ãƒ¼ã‚¿ãƒ¼&lt;br&gt;203.0.113.10" style="sketch=0;points=[[0,0,0],[0.25,0,0],[0.5,0,0],[0.75,0,0],[1,0,0],[0,1,0],[0.25,1,0],[0.5,1,0],[0.75,1,0],[1,1,0],[0,0.25,0],[0,0.5,0],[0,0.75,0],[1,0.25,0],[1,0.5,0],[1,0.75,0]];outlineConnect=0;fontColor=#232F3E;gradientColor=#945DF2;gradientDirection=north;fillColor=#5A30B5;strokeColor=#ffffff;dashed=0;verticalLabelPosition=bottom;verticalAlign=top;align=center;html=1;fontSize=10;fontStyle=0;aspect=fixed;shape=mxgraph.aws4.resourceIcon;resIcon=mxgraph.aws4.customer_gateway;" vertex="1" parent="onprem-area">
          <mxGeometry x="270" y="120" width="78" height="78" as="geometry" />
        </mxCell>

        <mxCell id="conn-nas-cgw" value="LAN" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#FF6B6B;strokeWidth=3;fontSize=10;fontColor=#232F3E;" edge="1" parent="onprem-area" source="nas-onprem" target="cgw">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <!-- Virtual Private Gateway (VPCå†…ã«è¿½åŠ ) -->
        <mxCell id="vgw" value="Virtual Private&lt;br&gt;Gateway (VGW)&lt;br&gt;IPsecçµ‚ç«¯" style="sketch=0;points=[[0,0,0],[0.25,0,0],[0.5,0,0],[0.75,0,0],[1,0,0],[0,1,0],[0.25,1,0],[0.5,1,0],[0.75,1,0],[1,1,0],[0,0.25,0],[0,0.5,0],[0,0.75,0],[1,0.25,0],[1,0.5,0],[1,0.75,0]];outlineConnect=0;fontColor=#232F3E;gradientColor=#945DF2;gradientDirection=north;fillColor=#5A30B5;strokeColor=#ffffff;dashed=0;verticalLabelPosition=bottom;verticalAlign=top;align=center;html=1;fontSize=10;fontStyle=0;aspect=fixed;shape=mxgraph.aws4.resourceIcon;resIcon=mxgraph.aws4.vpn_gateway;" vertex="1" parent="1">
          <mxGeometry x="190" y="1300" width="78" height="78" as="geometry" />
        </mxCell>

        <!-- VPN Connection (2æœ¬ã®ãƒˆãƒ³ãƒãƒ«) -->
        <mxCell id="vpn-tunnel-1" value="VPN Tunnel 1&lt;br&gt;IPsec AES-256&lt;br&gt;169.254.10.0/30" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#FF6B6B;strokeWidth=4;fontSize=9;fontColor=#232F3E;dashed=1;dashPattern=8 4;" edge="1" parent="1" source="cgw" target="vgw">
          <mxGeometry x="0.2" y="15" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>

        <mxCell id="vpn-tunnel-2" value="VPN Tunnel 2 (å†—é•·)&lt;br&gt;169.254.10.4/30" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#FF9900;strokeWidth=3;fontSize=9;fontColor=#232F3E;dashed=1;dashPattern=8 4;" edge="1" parent="1" source="cgw" target="vgw">
          <mxGeometry x="-0.2" y="-15" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>

        <!-- Lambda â†’ VGW â†’ NAS æŽ¥ç¶š -->
        <mxCell id="conn-lambda-vgw" value="10.1.0.0/16" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#9C27B0;strokeWidth=2;fontSize=9;fontColor=#232F3E;dashed=1;" edge="1" parent="1" source="lambda-file-1a" target="vgw">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <mxCell id="conn-lambda-nas-note" value="ðŸ“ æœˆæ¬¡åŒæœŸ: ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿&lt;br&gt;ðŸ“¸ ã‚ªãƒ³ãƒ‡ãƒžãƒ³ãƒ‰: ã‚µãƒ ãƒã‚¤ãƒ«&lt;br&gt;Port: 445 (SMB)" style="text;html=1;strokeColor=#FF6B6B;fillColor=#FFE6E6;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=1;fontSize=10;fontColor=#232F3E;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="120" y="2710" width="200" height="60" as="geometry" />
        </mxCell>

        <!-- ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚°ãƒ«ãƒ¼ãƒ—ãƒ•ãƒ­ãƒ¼ã‚’å‡¡ä¾‹ã«è¿½åŠ  -->
        <mxCell id="sg-flow-title" value="ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚°ãƒ«ãƒ¼ãƒ—ãƒ•ãƒ­ãƒ¼:" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=11;fontColor=#DD344C;fontStyle=1;" vertex="1" parent="legend-box">
          <mxGeometry x="15" y="265" width="370" height="20" as="geometry" />
        </mxCell>

        <mxCell id="sg-flow-1" value="   Lambda SG â†’ RDS SG (5432), Redis SG (6379), OpenSearch SG (443)" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=9;fontColor=#232F3E;fontFamily=Courier New;" vertex="1" parent="legend-box">
          <mxGeometry x="15" y="285" width="370" height="40" as="geometry" />
        </mxCell>

        <mxCell id="sg-flow-2" value="   Lambda SG â†’ S3/DynamoDB (Gateway EP), Internet (NAT), NAS (VPN 445)" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=9;fontColor=#232F3E;fontFamily=Courier New;" vertex="1" parent="legend-box">
          <mxGeometry x="15" y="325" width="370" height="40" as="geometry" />
        </mxCell>

        <!-- ãƒã‚¤ãƒ©ã‚¤ãƒˆãƒœãƒƒã‚¯ã‚¹ã®ã‚µã‚¤ã‚ºèª¿æ•´ -->
        <mxCell id="highlight-box-resize" value="" style="swimlane;startSize=0;fillColor=none;strokeColor=none;" vertex="1" parent="1">
          <mxGeometry x="100" y="2000" width="450" height="330" as="geometry" />
        </mxCell>

        <!-- å‡¡ä¾‹ãƒœãƒƒã‚¯ã‚¹ã®ã‚µã‚¤ã‚ºèª¿æ•´ -->
        <mxCell id="legend-box-resize" value="" style="swimlane;startSize=0;fillColor=none;strokeColor=none;" vertex="1" parent="1">
          <mxGeometry x="600" y="2000" width="400" height="380" as="geometry" />
        </mxCell>

      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
